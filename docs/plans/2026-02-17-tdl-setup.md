# tdl Setup & Authentication Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Install the tdl Telegram CLI tool and authenticate via QR code to enable file downloading.

**Architecture:** Install tdl binary via Homebrew, then create a separate Telegram session via QR code login (avoids conflicts with existing Telegram Desktop).

**Tech Stack:** tdl (Go CLI), Homebrew, Telegram API

---

### Task 1: Install tdl via Homebrew

**Step 1: Install the package**

Run: `brew install telegram-downloader`
Expected: Homebrew downloads and installs tdl binary

**Step 2: Verify installation**

Run: `tdl version`
Expected: Version output like `tdl v0.20.x` (any version is fine)

**Step 3: Check help**

Run: `tdl --help`
Expected: Help output showing available commands (login, dl, up, chat, etc.)

---

### Task 2: Authenticate via QR Code

**Prerequisite:** Have your phone with Telegram open nearby.

**Step 1: Start QR login**

Run: `tdl login -T qr`
Expected: A QR code appears in the terminal

**Step 2: Scan QR code with phone**

1. Open Telegram on your phone
2. Go to **Settings > Devices > Link Desktop Device**
3. Scan the QR code displayed in terminal
4. Confirm on phone if prompted

Expected: Terminal shows successful login message

**Step 3: Verify authentication**

Run: `tdl chat ls`
Expected: A list of your Telegram chats/channels appears, confirming the session is active

---

### Task 3: Test download (smoke test)

**Step 1: Find a test message link**

Pick any public channel message with a file/photo. Example format: `https://t.me/channelname/123`

**Step 2: Download**

Run: `tdl dl -u <YOUR_LINK> -d /Users/alexeyprudkin/dev/my-tdl/downloads`
Expected: File downloads to the specified directory

**Step 3: Verify file**

Run: `ls -la /Users/alexeyprudkin/dev/my-tdl/downloads/`
Expected: Downloaded file appears in the directory

---

## Troubleshooting

| Problem | Solution |
|---|---|
| QR code not scanning | Resize terminal window, try `tdl login -T code` as fallback |
| "msg_id too high" error | Run with `--ntp pool.ntp.org` flag |
| Slow downloads | Normal â€” Telegram throttles server-side. Premium accounts get higher limits |
| Session expired | Re-run `tdl login -T qr` |
